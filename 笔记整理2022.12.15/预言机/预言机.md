# 预言机
## 1.什么是预言机
### 1.1预言机的起源和发展
#### 1.1.1预言机的起源
Oracle在指古代原始人类在向神灵祈祷和祭祀时，神灵降下来的神谕。顾名思义，古代的象形文字和神谕大多数以甲骨文的形式记录，在艺术和文化上充满着神秘的色彩。
神谕（Oracle）的目的在于传达神的旨意从而预测未来，比如石器时代巫师对神的祈福和《易经》的八卦推演等。
### 1.2预言机的定义和分类
#### 1.2.1预言机的定义
- 狭义定义：将数据中链上链的链下平台
- 广义定义：将区块链和其他系统连接的链下平台
#### 1.2.2预言机的组成
预言机由运行在链上的智能合约和一些链下组件组成。链上合约来接收来自其他智能合约的数据请求，并将其传递给链下组件（预言机节点）预言机充当现实世界和区块链的“桥梁”，即将区块链上的智能合约连接到链下数据源。如果没有预言机，智能合约只能访问链上数据。预言机和智能合约还创建了“混合型智能合约”，即基于链上合约代码和链下基础设施组合运行的合约。
#### 1.2.3预言机的类型
##### 1.2.3.1中心化预言机
中心化预言机是由一个实体控制的，负责聚合链下的信息，并按要求更新预言机合约的数据。中心化预言机是高效的因为他是依赖单个真实的数据源。但也存在其他问题：
1. 低的正确性保证。使用中心化预言机，无法保证数据来源是否正确，且容易被黑客攻击。
2. Oracle并不能保证一直让链下数据对其他智能合约可用。如果提供商决定关闭服务，或者黑客劫持了oracle的链下组件，那么智能合约将拒绝服务（DoS）攻击的风险。 
#### 1.2.4预言机的数据获取方式
预言机既可以从链上获取原生数据，也可以通过爬虫网络或者传统第三方机构获取数据
对于预言机从链上获取数据，由于链上应用（Dapp）落地不及预期，导致用户对链上数据的需求有限，不足以支撑该模式的长期发展
如果预言机从链下获取数据，它既可以是授信传统第三方机构作为公链或者联盟链的节点给链上输出数据，也可以是预言家通过网络爬虫的方式抓取特定数据
## 2.预言机的问题
预言机将外部数据传输到区块链中，让智能合约访问链小数据，但是也带来了其他的新问题：
### 2.1.怎么验证传输的信息是来源于正确的数据源，数据源真实可信？
#### 2.1.1数据源选取和可信认证。
预言机需要谨慎选择外部数据源，必须保证对每个选取的外部数据源，都可以验证是可信的。例如：对于
web的数据获取，需要持有相关证书。
#### 2.1.2数据获取有标准流程。
开发者必须明确执行引擎、用户、外部数据源与预言机的数据交换流程，且对于不同的数据源类型要能够统一或明确区分数据的交互流程，确保交互方案可执行可落地。
#### 2.1.3数据交互格式统一。
不同的数据源类型有不同的数据交互格式，以传感器作为数据源和以Web作为数据源获取到的数据格式是不一样的，针对不同情况，明确统一的数据编解码层，以对不同数据源的数据进行请求和解释。
### 2.2如何保证传输过程中数据的安全性？
预言机通过两个阶段对进行中的数据实现可靠保证。

#### 2.2.1数据从网上到本地，采用HTTPS协议（底层采用TLS协议）去保障连接和数据的正确性、完整性。

#### 2.2.2数据从本地到链上，预言机采用可信执行环境 ( TEE ) 技术，TEE是CPU内一块安全区域，和操作系统独立运行，可以确保数据处理过程中的机密性、可靠性，趣链区块链平台研发了基于SGX的TEE实现以及基于国产芯片的TEE实现，进行预言机的安全保护。
## 3.预言机应用场景
智能合约开发人员使用预言机在更广泛的区块链用例中构建更高级的去中心化应用程序。虽然可能有无限多的可能性，但以下是最新采用的用例。

### 3.1.去中心化金融（DeFi）
去中心化金融（DeFi）生态系统的很大一部分需要预言机访问有关资产和市场的金融数据。例如，去中心化货币市场使用价格预言机来确定用户的借贷能力，并检查用户的头寸是否被低估，是否会被清算。类似地，合成资产平台使用价格预言机将代币价值与真实资产挂钩，自动做市商（AMM）使用价格预言机帮助以当前市场价格集中流动性，以提高资本效率。
### 3.2.动态NFT和游戏
预言机还为智能合约提供了非财务使用案例，例如动态NFT，这些代币可以根据外部事件（如一天中的时间或天气）改变外观、价值或分布。此外，计算预言机被用于生成可验证的随机性，然后项目使用该随机性将随机特征分配给NFT，或在高需求NFT下降中选择随机幸运的赢家。链上游戏应用程序还使用可验证的随机性来创建更具吸引力和不可预测的游戏体验，例如在比赛期间出现随机战利品盒或随机配对。
### 3.3.企业
跨链预言机为企业提供了一个安全的区块链中间件，允许企业将其后端系统连接到任何区块链网络。通过这样做，企业系统可以对任何区块链进行读/写，并就如何跨链部署资产和数据以及与使用同一预言机网络的交易对手进行部署执行复杂的逻辑。其结果是，机构能够快速加入交易对手需求量大的区块链，并快速为用户所需的智能合约服务提供支持，而无需花费时间和开发资源与各个区块链集成。
### 3.4.持续性
混合智能合同通过围绕绿色倡议的真实影响的先进验证技术，为参与绿色实践创造了更好的激励，从而促进了环境可持续性。预言机是向智能合约提供来自传感器读数、卫星图像和高级ML计算的环境数据的关键工具，从而允许智能合约向从事植树造林或有意识消费的人发放奖励。预言机还支持许多新形式的碳信用，以抵消气候变化的影响。