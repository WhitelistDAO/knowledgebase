# Uniswap分析
## Uniswap简介
Uniswap是基于以太坊的代币交换协议，它是去中心化的，不仅跟传统的加密货币交易所不同，也跟普通的去中心化代币交易所不同。Uniswap是一组部署到以太坊网络的合约，所有的交易都在链上进行。
它跟其他DEX一样，可以自由存入代币进行兑换，可以自由提取，没有中心化交易所的注册、身份验证和提取限制等。同时，跟其他的DEX相比，它的gas利用率较高，因此gas费用更便宜；它的交易对手并不是其他交易用户，它是跟代币池进行交易，且有自动做市的模型来计算交易价格。
## 自动做市模型算法
自动做市算法市Uniswap最重要的交易的基础，在自动做市算法中会根据某一时刻的交易池中代币对的代币数量计算出应该常量K，假设tokenA有X个，tokenB有Y个，此时K=X*Y，当后续有人买入X时，也就是用Y去兑换X，交易池中Y的值会增加，为了维护K值不变，就要相应的降低交易池中的X的数量所以，降低后X的数量为X’，而买入方所获得的兑换X代币的数量=X-X’。同理在有人买入Y代币时也是进行同样的算法。在实际交易时还要考虑交易手续费，交易手续费是由买入方承担。这个算法保证了市场稳定，不会出现大规模的价格波动。假设不断的用Y去对兑换X，那么随着兑换次数的增加，X-X’/Y的值会越来越低。

这是不计算交易费用的算法


![1.jpg](../_resources/1.jpg)

这是要计算交易费用的算法


![2.jpg](../_resources/2.jpg)

当伽马值等于1就是不计算交易费用的算法
## Uniswap V2与V3

Unswap V2是2020提出的，与V1不同的是增加了支持ERC20代币与ERC20代币的转换。
Uniswap V3 新特性与V2相比，Uniswap V3注重资本效率的最大化，Uniswap V3全新自动做市商（AMM）方案，除了最核心的聚合流动性之外，也带来多级费率控制、范围订单、历史预言机等功能。
Uniswap V2中的标准0.3%交易费，而V3提供了3个独立的费用等级：0.05%、0.3%和1%。
这使得流动性提供者可以根据他们愿意承担的风险来选择资金池，这对于流动性提供者可选择性更多及策略要求更高。
